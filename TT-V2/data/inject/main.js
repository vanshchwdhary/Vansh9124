{let e;try{e=document.getElementById("lwys-ctv-port"),e.remove()}catch(t){e=document.createElement("span"),e.id="lwys-ctv-port",document.documentElement.append(e)}const t=e=>{e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()};Object.defineProperty(document,"visibilityState",{get:()=>"false"===e.dataset.enabled&&"true"===e.dataset.hidden?"hidden":"visible"}),Object.defineProperty(document,"webkitVisibilityState",{get:()=>"false"===e.dataset.enabled&&"true"===e.dataset.hidden?"hidden":"visible"});const a={focus:!0,visibilitychange:!0,webkitvisibilitychange:!0};document.addEventListener("visibilitychange",(n=>{if(e.dispatchEvent(new Event("state")),"true"===e.dataset.enabled&&"false"!==e.dataset.visibility)return a.visibilitychange?void(a.visibilitychange=!1):t(n)}),!0),document.addEventListener("webkitvisibilitychange",(n=>{if("true"===e.dataset.enabled&&"false"!==e.dataset.visibility)return a.webkitvisibilitychange?void(a.webkitvisibilitychange=!1):t(n)}),!0),window.addEventListener("pagehide",(a=>{"true"===e.dataset.enabled&&"false"!==e.dataset.visibility&&t(a)}),!0),window.addEventListener("lostpointercapture",(a=>{"true"===e.dataset.enabled&&"false"!==e.dataset.pointercapture&&t(a)}),!0),Object.defineProperty(document,"hidden",{get:()=>"false"===e.dataset.enabled&&"true"===e.dataset.hidden}),Object.defineProperty(document,"webkitHidden",{get:()=>"false"===e.dataset.enabled&&"true"===e.dataset.hidden}),Document.prototype.hasFocus=new Proxy(Document.prototype.hasFocus,{apply:(t,a,n)=>"true"===e.dataset.enabled&&"false"!==e.dataset.focus||Reflect.apply(t,a,n)});const n=n=>{if("true"===e.dataset.enabled&&"false"!==e.dataset.focus&&(n.target===document||n.target===window))return a.focus?void(a.focus=!1):t(n)};document.addEventListener("focus",n,!0),window.addEventListener("focus",n,!0);const i=a=>{if("true"===e.dataset.enabled&&"false"!==e.dataset.blur&&(a.target===document||a.target===window))return t(a)};document.addEventListener("blur",i,!0),window.addEventListener("blur",i,!0),window.addEventListener("mouseleave",(a=>{if("true"===e.dataset.enabled&&"false"!==e.dataset.mouseleave&&(a.target===document||a.target===window))return t(a)}),!0);let d=0;window.requestAnimationFrame=new Proxy(window.requestAnimationFrame,{apply(t,a,n){if("true"===e.dataset.enabled&&"true"===e.dataset.hidden){const e=Date.now(),t=Math.max(0,16-(e-d)),a=setTimeout((function(){n[0](performance.now())}),t);return d=e+t,a}return Reflect.apply(t,a,n)}}),window.cancelAnimationFrame=new Proxy(window.cancelAnimationFrame,{apply:(t,a,n)=>("true"===e.dataset.enabled&&"true"===e.dataset.hidden&&clearTimeout(n[0]),Reflect.apply(t,a,n))})}